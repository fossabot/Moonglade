export function getStatistics(n){const t=`/api/statistics/${n}`;fetch(t).then(n=>n.json()).then(n=>{document.querySelector(".post-hit-number-text").innerText=n.hits;var t=document.querySelector(".likehits-num");t&&(t.innerText=n.likes)}).catch(n=>{blogToast.error(n),console.error(n)})}export function postStatistics(n,t){const i={postId:n,isLike:t};callApi("/api/statistics","POST",i,()=>{if(t){let n=parseInt(document.querySelector(".likehits-num").innerText,10);document.querySelector(".likehits-num").innerHTML=++n;document.querySelector(".btn-ratings").setAttribute("disabled","disabled")}})}export function resizeImages(){$(".post-content img").removeAttr("height");$(".post-content img").removeAttr("width");$(".post-content img").addClass("img-fluid img-thumbnail")}export function registerRatingButtons(n){$(".btn-ratings").click(function(){hasLiked||(postStatistics(n,!0),hasLiked=!0)})}export function renderCodeHighlighter(){$("pre").each(function(n,t){$(t).find("code")[0]===undefined&&$(t).wrapInner("<code><\/code>");$(t).hasClass("language-markup")&&$(t).children("code").addClass("lang-xml")});$("pre code").each(function(n,t){hljs.highlightElement(t)})}export function warnExtLink(){$.expr[":"].external=function(n){return!n.href.match(/^mailto\\:/)&&n.hostname!=location.hostname};var n=new bootstrap.Modal("#externalLinkModal");$(".post-content a:external").addClass("external");$("a.external").click(function(t){t.preventDefault();var i=$(this).attr("href");$("#extlink-url").html(i);document.querySelector("#extlink-continue").href=i;n.show()});$("#extlink-continue").click(function(){n.hide()})}export function getImageWidthInDevicePixelRatio(n){if(n<=0)return 0;var t=window.devicePixelRatio;return t===1?n:n/t}export function applyImageZooming(){$(".post-content img").click(function(){var t=$(this).attr("src"),n;document.querySelector("#imgzoom").src=t;window.fitImageToDevicePixelRatio&&setTimeout(function(){var n=$("#imgzoom")[0].naturalWidth;$("#imgzoom").css("width",getImageWidthInDevicePixelRatio(n))},100);n=new bootstrap.Modal("#imgzoomModal");n.show()})}export function resetCaptchaImage(){const n=new Date;document.querySelector("#img-captcha").src=`/captcha-image?${n.getTime()}`}export function submitComment(t){document.querySelector("#thx-for-comment").style.display="none";document.querySelector("#thx-for-comment-non-review").style.display="none";document.querySelector("#loadingIndicator").style.display="block";document.querySelector(n).classList.add("disabled");document.querySelector(n).setAttribute("disabled","disabled");callApi(`/api/comment/${t}`,"POST",{username:document.querySelector("#input-comment-name").value,content:document.querySelector("#input-comment-content").value,email:document.querySelector("#input-comment-email").value,captchaCode:document.querySelector("#input-comment-captcha").value},n=>{document.querySelector("#comment-form").reset();resetCaptchaImage();var t=n.status;t===201&&(document.querySelector("#thx-for-comment").style.display="block");t===200&&(document.querySelector("#thx-for-comment-non-review").style.display="block")},()=>{document.querySelector("#loadingIndicator").style.display="none",document.querySelector(n).classList.remove("disabled"),document.querySelector(n).removeAttribute("disabled")})}export let hasLiked=!1;var n="#btn-submit-comment";